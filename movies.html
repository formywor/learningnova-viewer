<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Movies</title>
  <meta name="description" content="Browse and play your Google Drive-embedded movies." />
  <style>
    :root {
      --bg: #0b0f14;
      --card: #141a22;
      --muted: #9fb0c3;
      --text: #e8f0f7;
      --primary: #7cc0ff;
      --ring: rgba(124,192,255,.35);
      --shadow: rgba(0,0,0,.3);
      --danger: #ff5c7a;
      --success: #6ad38a;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; background: radial-gradient(1200px 600px at 100% -10%, rgba(124,192,255,.05), transparent) , var(--bg);
      color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    header {
      position: sticky; top: 0; z-index: 5; backdrop-filter: blur(10px); background: linear-gradient(180deg, rgba(11,15,20,.8), rgba(11,15,20,.45) 65%, transparent);
      border-bottom: 1px solid rgba(124,192,255,.12);
    }
    .container { max-width: 1100px; margin: 0 auto; padding: 16px; }
    .title-row { display: flex; gap: 14px; align-items: center; justify-content: space-between; flex-wrap: wrap; }
    h1 { font-size: clamp(20px, 2.6vw, 30px); margin: 0; letter-spacing: .3px; }

    .controls { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .field { position: relative; }
    .input {
      background: var(--card); color: var(--text); border: 1px solid rgba(124,192,255,.18);
      padding: 10px 12px; border-radius: 10px; outline: none; min-width: 260px;
      box-shadow: 0 1px 0 rgba(255,255,255,.04) inset, 0 0 0 0 var(--ring);
      transition: box-shadow .15s ease, border-color .15s ease, transform .05s ease;
    }
    .input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px var(--ring); }

    .icon-btn {
      appearance: none; background: transparent; color: var(--text); border: 1px solid rgba(124,192,255,.22);
      padding: 8px 12px; border-radius: 10px; cursor: pointer; display: inline-flex; align-items: center; gap: 8px;
      transition: transform .05s ease, box-shadow .15s ease, border-color .15s ease;
    }
    .icon-btn:hover { border-color: var(--primary); box-shadow: 0 0 0 4px var(--ring); }

    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 14px; padding: 18px 0 40px; }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border: 1px solid rgba(124,192,255,.15); border-radius: 14px; overflow: hidden;
      box-shadow: 0 20px 40px -25px var(--shadow);
      display: flex; flex-direction: column; min-height: 240px;
      transition: transform .12s ease, box-shadow .15s ease, border-color .15s ease;
      cursor: pointer;
    }
    .card:hover { transform: translateY(-2px); border-color: rgba(124,192,255,.45); box-shadow: 0 25px 50px -28px var(--shadow); }
    .poster { aspect-ratio: 16 / 9; background: #0e1319; display: grid; place-items: center; font-size: 13px; color: var(--muted); letter-spacing: .2px; }
    .meta { padding: 10px 12px 12px; display: grid; gap: 6px; }
    .name { font-weight: 700; line-height: 1.2; }
    .year { color: var(--muted); font-size: 12px; }
    .desc { color: var(--muted); font-size: 12px; line-height: 1.35; }

    dialog[open] { display: grid; }
    dialog {
      width: min(960px, 94vw); padding: 0; border: none; border-radius: 16px; overflow: hidden;
      background: #0b0f14; color: var(--text);
      box-shadow: 0 30px 120px -20px rgba(0,0,0,.6), 0 0 0 1px rgba(124,192,255,.32) inset;
    }
    .modal-head { display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; border-bottom: 1px solid rgba(124,192,255,.18); }
    .modal-title { font-weight: 700; }
    .modal-body { padding: 12px; }
    .player { position: relative; padding-top: 56.25%; background: #000; border-radius: 10px; overflow: hidden; }
    .player iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; }

    /* Settings */
    .settings-form { padding: 14px; display: grid; gap: 12px; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    label { font-size: 12px; color: var(--muted); margin-bottom: 6px; display: block; }
    .hint { font-size: 12px; color: var(--muted); opacity: .9; }
    .btn { appearance: none; background: linear-gradient(180deg, #1f2a37, #151d27); color: var(--text); border: 1px solid rgba(124,192,255,.22); padding: 10px 14px; border-radius: 10px; cursor: pointer; }
    .btn.primary { background: linear-gradient(180deg, #2b87ff, #1e5bd6); border-color: #5aa5ff; }
  </style>
</head>
<body>
  <header>
    <div class="container title-row">
      <h1>üé¨ My Movies</h1>
      <div class="controls">
        <div class="field"><input id="search" class="input" type="search" placeholder="Search movies by name or year‚Ä¶" autocomplete="off" /></div>
        <button id="btnSettings" class="icon-btn" title="Player settings">‚öôÔ∏è Settings</button>
      </div>
    </div>
  </header>

  <main class="container">
    <div id="grid" class="grid" role="list"></div>
    <div id="empty" class="hint" hidden>No movies match your search.</div>
  </main>

  <!-- Player Modal -->
  <dialog id="viewer">
    <div class="modal-head">
      <div class="modal-title" id="viewerTitle">Playing</div>
      <div style="display:flex; gap:8px; align-items:center;">
        <button id="closeViewer" class="btn">Close</button>
      </div>
    </div>
    <div class="modal-body">
      <div class="player"><iframe id="playerFrame" allow="autoplay; fullscreen" allowfullscreen referrerpolicy="no-referrer"></iframe></div>
      <div class="hint" style="margin-top:8px;">Tip: Press <strong>F</strong> to toggle fullscreen, <strong>Esc</strong> to exit.</div>
    </div>
  </dialog>

  <!-- Settings Modal -->
  <dialog id="settings">
    <form method="dialog" class="settings-form">
      <h3 style="margin:0;">Player Settings</h3>
      <div class="row">
        <div>
          <label for="defaultVolume">Default volume (0‚Äì200%)</label>
          <input id="defaultVolume" class="input" type="number" min="0" max="200" step="10" value="100" />
          <div class="hint">Note: Google Drive embeds may ignore volume control due to browser restrictions.</div>
        </div>
        <div>
          <label for="autoFullscreen">Autofullscreen on play</label>
          <select id="autoFullscreen" class="input">
            <option value="on" selected>On</option>
            <option value="off">Off</option>
          </select>
        </div>
      </div>
      <div>
        <label for="autoplay">Autoplay when opened</label>
        <select id="autoplay" class="input">
          <option value="on" selected>On</option>
          <option value="off">Off</option>
        </select>
      </div>
      <div class="hint">For true volume boost above 100%, host files directly and use a native &lt;video&gt; player. Third‚Äëparty iframes (like Drive) do not expose volume to the page.</div>
      <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:8px;">
        <button class="btn" value="cancel">Close</button>
        <button id="saveSettings" class="btn primary" value="default">Save</button>
      </div>
      <div id="saveMsg" class="success" hidden>Saved!</div>
    </form>
  </dialog>

  <script>
    // ‚Äî‚Äî Utilities ‚Äî‚Äî
    const byId = (id) => document.getElementById(id);
    const grid = byId('grid');
    const empty = byId('empty');
    const search = byId('search');
    const viewer = byId('viewer');
    const playerFrame = byId('playerFrame');
    const viewerTitle = byId('viewerTitle');

    const settingsDlg = byId('settings');
    const btnSettings = byId('btnSettings');
    const defaultVolumeEl = byId('defaultVolume');
    const autoFullscreenEl = byId('autoFullscreen');
    const autoplayEl = byId('autoplay');
    const saveSettingsBtn = byId('saveSettings');
    const saveMsg = byId('saveMsg');

    const DRIVE_PREVIEW = (fileId) => `https://drive.google.com/file/d/${fileId}/preview`;
    const extractDriveId = (url='') => (url.match(/\/d\/([a-zA-Z0-9_-]{20,})\//)||[])[1]||'';

    // ‚Äî‚Äî Data Model: static list with links, years, descriptions ‚Äî‚Äî
    const movies = [
      { title: 'A Minecraft Movie', year: 2025, fileId: extractDriveId('https://drive.google.com/file/d/1-fziujdIbWw9TUbbChrjqqBAJzZxEOsr/view?usp=drive_link'), desc: 'Live-action adventure set in the blocky world where heroes must save the Overworld from the Ender Dragon.' },
      { title: 'Black Clover (Dub) Episode 100', year: 2019, fileId: extractDriveId('https://drive.google.com/file/d/1UIQCch0dJma__L8TPeDCtPLySwLqDZQq/view?usp=drive_link'), desc: 'Sh≈çnen anime milestone episode where Asta and the Black Bulls face escalating threats.' },
      { title: 'Black Panther', year: 2018, fileId: extractDriveId('https://drive.google.com/file/d/11hLrdIOcLq2hAhIewpxkjytNFve_gqYT/view?usp=drive_link'), desc: 'T‚ÄôChalla returns to Wakanda to claim the throne and confronts the mercenary Killmonger.' },
      { title: 'Black Panther: Wakanda Forever', year: 2022, fileId: extractDriveId('https://drive.google.com/file/d/1WOxZ8i9Gr1zJzlANkLRM5YPmhkI2Q93S/view?usp=drive_link'), desc: 'The nation of Wakanda mourns and unites to face a hidden undersea kingdom led by Namor.' },
      { title: 'Deadpool', year: 2016, fileId: extractDriveId('https://drive.google.com/file/d/16pF0T-PqYx3BbSUiE-MbCmeUPw9tnDd5/view?usp=drive_link'), desc: 'A merc with a mouth breaks the fourth wall seeking revenge after an experimental mutation.' },
      { title: 'Deadpool & Wolverine', year: 2024, fileId: extractDriveId('https://drive.google.com/file/d/1AdYF2nYPM3rOaH0Q4ywyWYAC4X6yBv93/view?usp=drive_link'), desc: 'Deadpool teams up with a reluctant Wolverine for a multiverse-hopping, R-rated buddy ride.' },
      { title: 'Despicable Me 4', year: 2024, fileId: extractDriveId('https://drive.google.com/file/d/1wz9vQjEUL46arylLCi21qNYpP1qMn6bs/view?usp=drive_link'), desc: 'Gru, Lucy, and the girls welcome Gru Jr., while a new villain targets the family.' },
      { title: 'Doctor Strange', year: 2016, fileId: extractDriveId('https://drive.google.com/file/d/1Kwlx0Liry2qxeS3v9XaMh7A8vEIIis14/view?usp=drive_link'), desc: 'A brilliant surgeon becomes the Sorcerer Supreme, guarding the world from mystical threats.' },
      { title: 'Doctor Strange in the Multiverse of Madness', year: 2022, fileId: extractDriveId('https://drive.google.com/file/d/1n4iKIiK5CA9oJQPvawXZ50u9vTW5T1Ej/view?usp=drive_link'), desc: 'Strange and America Chavez race through chaotic realities to stop a grief-fueled Scarlet Witch.' },
      { title: 'Fast & Furious 7', year: 2015, fileId: extractDriveId('https://drive.google.com/file/d/130quoc_SVtHwCwoEYdIAmye9q2Vh2Ql3/view?usp=drive_link'), desc: 'Dom‚Äôs crew faces Deckard Shaw in a globe-trotting revenge thriller; a farewell to Paul Walker.' },
      { title: 'Haikyuu!! (Dub) Episode 1', year: 2014, fileId: extractDriveId('https://drive.google.com/file/d/17x99qUmpDExMJ7DT3HvHTBrS90rf7c9O/view?usp=drive_link'), desc: 'Hinata, inspired by ‚ÄúThe Little Giant,‚Äù gets his first taste of high school volleyball.' },
      { title: 'Harry Potter and the Chamber of Secrets', year: 2002, fileId: extractDriveId('https://drive.google.com/file/d/1DSVDs6xu1ZPq6RrHcWPq3EyQxwGazqtC/view?usp=drive_link'), desc: 'Harry returns to Hogwarts to uncover the heir of Slytherin and the monster within the Chamber.' },
      { title: 'Harry Potter and the Goblet of Fire', year: 2005, fileId: extractDriveId('https://drive.google.com/file/d/1SQefySmAExMzCh5w5HJdkHV5RAPoaSBY/view?usp=drive_link'), desc: 'Harry is unexpectedly entered into the dangerous Triwizard Tournament as Voldemort‚Äôs shadow grows.' },
      { title: 'Harry Potter and the Half-Blood Prince', year: 2009, fileId: extractDriveId('https://drive.google.com/file/d/1e1xoPCmHUCU4ih_DZqYBZmY8dWXLd1b4/view?usp=drive_link'), desc: 'Dumbledore and Harry delve into Voldemort‚Äôs past while a mysterious textbook guides Harry.' },
      { title: 'Hotel Transylvania', year: 2012, fileId: extractDriveId('https://drive.google.com/file/d/19Wuk78Aa8Z2VcLP0ZdqhgR88QUHNt3oC/view?usp=drive_link'), desc: 'Dracula runs a monsters-only resort that‚Äôs upended by a human who falls for his daughter, Mavis.' },
      { title: 'Hotel Transylvania 2', year: 2015, fileId: extractDriveId('https://drive.google.com/file/d/15htTFbkVjB8JPYzX9WBOcX9e8YdaayDp/view?usp=drive_link'), desc: 'Drac trains his half-human grandson while his father Vlad visits, stirring family chaos.' },
      { title: 'Hotel Transylvania 3: Summer Vacation', year: 2018, fileId: extractDriveId('https://drive.google.com/file/d/1DurA21-VmoMleNQLQAoqCKDJWKk49N9K/view?usp=drive_link'), desc: 'The gang boards a monster cruise where Drac ‚Äúzings‚Äù with the ship‚Äôs mysterious captain.' },
      { title: 'How to Train Your Dragon: The Hidden World', year: 2019, fileId: extractDriveId('https://drive.google.com/file/d/1xKbxjOfioffB7ywYP_liiZBDGu5wdnVW/view?usp=drive_link'), desc: 'Hiccup and Toothless seek a secret dragon utopia while a ruthless hunter threatens Berk.' },
      { title: 'Lilo & Stitch', year: 2002, fileId: extractDriveId('https://drive.google.com/file/d/1fjhNE9jqDPSSfQEtL5UtBNs4vMmXsP_G/view?usp=drive_link'), desc: 'An orphaned girl adopts a chaotic alien experiment and finds family in the unlikeliest friend.' },
      { title: 'Lilo & Stitch 2: Stitch Has a Glitch', year: 2005, fileId: extractDriveId('https://drive.google.com/file/d/1meCX86x0thjKQ-VubxyL2Tm3sRDsqemo/view?usp=drive_link'), desc: 'Stitch‚Äôs molecules destabilize, risking his bond with Lilo unless a cure is found.' },
      { title: 'Moana 2', year: 2024, fileId: extractDriveId('https://drive.google.com/file/d/1zTCufkuZRct9S9qXrS4yKbdu1yuLf80O/view?usp=drive_link'), desc: 'Moana sets sail on a new voyage across Oceania to unite wayfinders beyond the reef.' },
      { title: 'Moana', year: 2016, fileId: extractDriveId('https://drive.google.com/file/d/1lJr9rPyhROmTG4K-k0NXDRL7xJM3NprC/view?usp=drive_link'), desc: 'A spirited navigator and the demigod Maui restore the heart of Te Fiti to save her island.' },
      { title: 'Paws of Fury: The Legend of Hank', year: 2022, fileId: extractDriveId('https://drive.google.com/file/d/1_TEv5DZ8Fzk70RDunynbzPgLTTwnk8Z9/view?usp=drive_link'), desc: 'A loveable dog trains as a samurai to protect a cat town from a ruthless warlord.' },
      { title: 'Stitch! The Movie', year: 2003, fileId: extractDriveId('https://drive.google.com/file/d/1DhUbxyYvndjRKF2oD3B6k44p2mahOy99/view?usp=drive_link'), desc: 'Lilo and Stitch discover hundreds of other experiments scattered across Hawaii.' },
      { title: 'Superman (2025)', year: 2025, fileId: extractDriveId('https://drive.google.com/file/d/1RGytu3y5W4_k5qKD2Y3KeI5VAXToffHQ/view?usp=drive_link'), desc: 'A fresh chapter for the Man of Steel balancing humanity and heroism.' },
      { title: 'The Bad Guys 2', year: 2025, fileId: extractDriveId('https://drive.google.com/file/d/1J9qAPAGqGiGvNtHdF2DGYDxP39n8AC0Z/view?usp=drive_link'), desc: 'The reformed heist crew faces a new caper that tests their ‚Äúgood‚Äù resolve.' },
      { title: 'The Fantastic 4', year: 2025, fileId: extractDriveId('https://drive.google.com/file/d/1yss780z2EXuGEHDzuxkREtX6xcK_6Lzp/view?usp=drive_link'), desc: 'Marvel‚Äôs first family bands together to face a cosmic-level threat.' },
      { title: 'The Black Panther (1977 doc)', year: 2016, fileId: extractDriveId('https://drive.google.com/file/d/1PWHZo72thyAROVMGIg9Id7RNIjrVelsl/view?usp=drive_link'), desc: 'A look back at the 1977 figure nicknamed ‚ÄúBlack Panther.‚Äù' },
      { title: 'The Real Black Panther', year: 2020, fileId: extractDriveId('https://drive.google.com/file/d/11AbfjXDLKvtM1hWIopxvhdW_i7Vc8ZDc/view?usp=drive_link'), desc: 'Wildlife documentary following a rare melanistic leopard in India.' },
      { title: 'Zootopia', year: 2016, fileId: extractDriveId('https://drive.google.com/file/d/1wxwyw6OROzwprZOTMJksi1ouYnGQJGVH/view?usp=drive_link'), desc: 'Rookie bunny cop Judy Hopps teams with con-artist fox Nick Wilde to solve a citywide mystery.' }
    ];

    // ‚Äî‚Äî Settings persistence ‚Äî‚Äî
    const SETTINGS_KEY = 'movie-settings-v1';
    function loadSettings(){
      try { return JSON.parse(localStorage.getItem(SETTINGS_KEY)) || { volume: 100, autoFs: 'on', autoplay: 'on' }; } catch { return { volume: 100, autoFs: 'on', autoplay: 'on' }; }
    }
    function saveSettings(s){ localStorage.setItem(SETTINGS_KEY, JSON.stringify(s)); }
    let settings = loadSettings();

    // ‚Äî‚Äî Render ‚Äî‚Äî
    function render(list = movies) {
      grid.innerHTML = '';
      const q = search.value.trim().toLowerCase();
      const filtered = list.filter(m => !q || `${m.title} ${m.year}`.toLowerCase().includes(q));
      empty.hidden = filtered.length !== 0;

      for (const m of filtered) {
        const card = document.createElement('article');
        card.className = 'card';
        card.setAttribute('role','listitem');
        const poster = document.createElement('div');
        poster.className = 'poster';
        poster.textContent = 'Click to play';
        const meta = document.createElement('div'); meta.className = 'meta';
        const title = document.createElement('div'); title.className = 'name'; title.textContent = m.title;
        const year = document.createElement('div'); year.className = 'year'; year.textContent = m.year || '';
        const desc = document.createElement('div'); desc.className = 'desc'; desc.textContent = m.desc || '';
        meta.appendChild(title); meta.appendChild(year); meta.appendChild(desc);
        card.appendChild(poster); card.appendChild(meta);
        card.addEventListener('click', () => openPlayer(m));
        grid.appendChild(card);
      }
    }

    // ‚Äî‚Äî Player ‚Äî‚Äî
    function openPlayer(movie) {
      const base = DRIVE_PREVIEW(movie.fileId);
      const autoplay = settings.autoplay === 'on' ? 1 : 0;
      // Drive preview supports autoplay param in some cases
      const src = `${base}?autoplay=${autoplay}`;
      playerFrame.src = src;
      viewerTitle.textContent = `${movie.title} ${movie.year ? '('+movie.year+')' : ''}`;
      viewer.showModal();

      // Try to request fullscreen ASAP if enabled
      if (settings.autoFs === 'on') {
        // Give dialog a moment to attach before requesting
        setTimeout(() => {
          if (viewer.requestFullscreen) viewer.requestFullscreen().catch(()=>{});
        }, 50);
      }

      // NOTE on volume: cannot set iframe volume via JS due to cross-origin. Show a one-time tip if >100
      if (settings.volume > 100) {
        if (!localStorage.getItem('volume-tip-shown')) {
          alert('Volume boost above 100% works only with native <video> sources. Google Drive embeds may not allow boosting.');
          localStorage.setItem('volume-tip-shown','1');
        }
      }
    }
    byId('closeViewer').addEventListener('click', () => { playerFrame.src = ''; if (document.fullscreenElement) document.exitFullscreen().catch(()=>{}); viewer.close(); });

    // Search
    search.addEventListener('input', () => render());

    // Settings
    btnSettings.addEventListener('click', () => {
      defaultVolumeEl.value = settings.volume;
      autoFullscreenEl.value = settings.autoFs;
      autoplayEl.value = settings.autoplay;
      saveMsg.hidden = true;
      settingsDlg.showModal();
    });
    saveSettingsBtn.addEventListener('click', (e) => {
      e.preventDefault();
      settings = { volume: Math.max(0, Math.min(200, parseInt(defaultVolumeEl.value || '100', 10))), autoFs: autoFullscreenEl.value, autoplay: autoplayEl.value };
      saveSettings(settings);
      saveMsg.hidden = false;
      setTimeout(() => settingsDlg.close(), 250);
    });

    // Accessibility: Esc closes modals
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (viewer.open) { playerFrame.src = ''; if (document.fullscreenElement) document.exitFullscreen().catch(()=>{}); viewer.close(); }
        if (settingsDlg.open) settingsDlg.close();
      }
      if (e.key.toLowerCase() === 'f' && viewer.open) {
        if (!document.fullscreenElement) { viewer.requestFullscreen?.(); } else { document.exitFullscreen?.(); }
      }
    });

    // First paint
    render();
  </script>
</body>
</html>